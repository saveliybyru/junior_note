# Gulp-памятка

Чтобы использовать нужно знать несколько вещей:

1. Для использования `Gulp` нужно иметь установленный `node.js`. Также нужно иметь установленный `npm`.
2. Для начала работы нужно создать конфигурационные файлы в корне проекта. Их всего 2:
    1. `package.json` — файл с указанием всех пакетов, которые вы устанавливаете, в нём же указываются и расшифровываются для самого Gulp все скрипты (команды), которые вы будете вводить в консоли.
    2. `gulpfile.js` — файл в котором составляются последовательности действий для Gulp, можно назвать это программой, которую будет выполнять Gulp при вводе определённых команд.



## 1. Подключение пакетов

"Пакет" — это отдельная программа, которая работает, когда её запускает Gulp

Подключая пакет, не забудь указать его в списке пакетов, которые нужно скачать и установить.

##### 1.1 Указываем в `package.json` в разделе зависимостей "devDependencies" название пакета и его версию:

 ```json
 "package": "version"
 ``` 

##### 1.2 Указываем пакет в `gulpfile.js `в самом начале файла (так просто удобнее отслеживать):

 ```js
 const name-package = require("package")
 ```
___

## 2. Создание скрипта

___

Всё, что описано в данном разделе, происходит в `gulpfile.js`
___

```js
 const nameScript = () => { // 1
      return namePackage.src("folder/file.ext")  //  2.1
      .pipe(namePackage2()) //  2.2
      …
    }
 exports.nameScript = nameScript; //  3
```	
1. Объявляем название скрипта
2. Наполняем его функциями, которые нужно выполнять:
	1. Передаём функции файл `file.ext`, который лежит в `folder/`:
	2. Указываем пакет, который будет работать с данным файлом:
3. Если будем в дальнейшем использовать скрипт в других скриптах или использовать, как готовый скрипт в Gulp, то указываем экспорт
___

## 3. Итоговые скрипты

Продолжаем писать в `gulpfile.js`

Обычно итоговых скриптов 3: 
1. `build` — сборка для продакшена);
2. `start` — сборка для разработки) и 
3. `watcher` — скрипт для отслеживания изменений в файлах при разработке
___

### 3.1 Делаем watcher:
```js
const watcher = () => {
    gulp.watch("folder/file.ext", gulp.series(nameScript));
}
```	

    
### 3.2 Делаем build:

```js
const build = gulp.series( // тут передаём те скрипты, которые нужно выполнять последовательно, т.е. они выполняются по порядку.
        nameScript1
        nameScript2
      gulp.parallel( // тут передаём те скрипты, которые можно выполнить параллельно. Также не забудь его включить в series последним.
        nameScript3
        nameScript4
        ),
      );
```	

### 3.3 Делаем start:

Тут обратите внимание на то, что можно внутрь всё скопировать из build, 
но опустив некоторые оптимизации (например, изображений) и заменив их на простое копирование. 

Также в конце нужно добавить watcher, который мы делали ранее, чтобы при запущенном сервере,
редакция сразу же применялась к итоговой странице и она автоматически перезагружалась при сохранении.

```js
exports.default = gulp.series(
    nameScript1
    nameScript2
    gulp.parallel(
      nameScript3
      nameScript4
      ),
    gulp.series(
      nameScript5
      watcher
    ));
```	

___

## 4. Пишем скрипты Gulp

___

Всё, что описано в данном разделе, происходит в `package.json`
___
После указания зависимостей, указываем следующую конструкцию:

Обратите внимание, что менять можно только название команды "command" и сам скрипт "script".
Также тут можно указывать те скрипты, которые мы делали в gulpfile.js указав в самом скрипте "gulp nameScript" вместо "script". 
nameScript из пункта 2.2.3, который после равно, т.е ваше название. 

```json
	"scripts": {
	  "command1": "script",
	  "command2": "gulp nameScript",
	  "build": "gulp build",
	  "start": "gulp"
    },

```	
